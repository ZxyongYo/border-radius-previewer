var m=Object.defineProperty;var c=(h,t,s)=>t in h?m(h,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):h[t]=s;var i=(h,t,s)=>(c(h,typeof t!="symbol"?t+"":t,s),s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const d of n.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function s(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerpolicy&&(n.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?n.credentials="include":e.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(e){if(e.ep)return;e.ep=!0;const n=s(e);fetch(e.href,n)}})();class g{constructor({state:t={},boxEleId:s="box",shapeEleId:o="shape",codeEleId:e="code",widthInputId:n="width",heightInputId:d="height",resetBtnId:a="reset",copyBtnId:l="copy",messageEleId:r="message",moveableElems:u={}}={}){i(this,"state");i(this,"box");i(this,"shape");i(this,"codeEle");i(this,"widthInput");i(this,"heightInput");i(this,"resetBtn");i(this,"copyBtn");i(this,"messageEle");i(this,"timerId");this.box=document.getElementById(s),this.shape=document.getElementById(o),this.codeEle=document.getElementById(e),this.copyBtn=document.getElementById(l),this.messageEle=document.getElementById(r),this.widthInput=document.getElementById(n),this.heightInput=document.getElementById(d),this.resetBtn=document.getElementById(a),this.widthInput.addEventListener("change",()=>{this.updateState("width",this.widthInput.value),this.saveStateAsUrlHash()}),this.heightInput.addEventListener("change",()=>{this.updateState("height",this.heightInput.value),this.saveStateAsUrlHash()}),this.resetBtn.addEventListener("click",this.resetBoxSize.bind(this)),this.copyBtn.addEventListener("click",this.handleCopyCode.bind(this)),this.initState(t),this.initHandles(u)}updateState(t,s){this.state[t]=s,this.updateBorderRadius(),this.updateBoxSize()}updateBoxSize(){this.box.style.width=this.state.width+"px",this.box.style.height=this.state.height+"px",this.widthInput.value=this.state.width,this.heightInput.value=this.state.height}resetBoxSize(){this.box.style.width="50vmin",this.box.style.height="50vmin",this.state.width=this.box.offsetWidth.toFixed(0),this.state.height=this.box.offsetHeight.toFixed(0),this.widthInput.value=this.state.width,this.heightInput.value=this.state.height,this.saveStateAsUrlHash()}async handleCopyCode(){await navigator.clipboard.writeText(this.codeEle.innerText),this.showMessage()}showMessage(t="Copied success! \u{1F44C}",s=2500){this.timerId&&clearTimeout(this.timerId),this.messageEle.innerText=t,this.messageEle.classList.add("visible"),this.timerId=setTimeout(()=>{this.messageEle.classList.remove("visible")},s)}setHash(t){window.history&&"pushState"in window.history?window.history.pushState(null,"",t):window.location.hash=t}static generateInitStateFromUrlHash(t){const s=/#(\d\d?|100)\.(\d\d?|100)\.(\d\d?|100)\.(\d\d?|100)-(?:(\d\d?|100)\.(\d\d?|100)\.(\d\d?|100)\.(\d\d?|100))?-(\d*).(\d*)/gm;if(!s.test(t))return;const o=["topX","rightY","bottomX","leftY","topY","rightX","bottomY","leftX","width","height"],e={};let n;for(s.lastIndex=0;(n=s.exec(t))!==null;)n.forEach((d,a)=>{a!=0&&d&&(e[o[a-1]]=d)});return e}}class p{constructor(t,s,o,e=30,n=()=>{}){i(this,"element");i(this,"onChange");i(this,"axis");i(this,"offset");i(this,"onDragEnd");i(this,"onMousedown",t=>{t.preventDefault(),this.element.classList.add("active"),document.addEventListener("mousemove",this.onMove),document.addEventListener("mouseup",this.onEnd)});i(this,"onMove",t=>{this.setPosition(t.clientX,t.clientY),this.onChange(this.element.id,this.offset)});i(this,"onEnd",()=>{this.element.classList.remove("active"),this.onDragEnd(),document.removeEventListener("mousemove",this.onMove),document.removeEventListener("mouseup",this.onEnd)});this.element=t,this.onChange=s,this.axis=o,this.offset=e,this.onDragEnd=n,this.initPosition(e),this.onChange(this.element.id,this.offset),this.element.addEventListener("mousedown",this.onMousedown)}setPosition(t,s){const o=this.element.parentElement.parentElement.getBoundingClientRect();if(this.axis==="x"){const e=+((t-o.left)/o.width*100).toFixed(0);this.offset=this.minmax(e,0,100),this.element.style.left=this.offset+"%"}else{const e=+((s-o.top)/o.height*100).toFixed(0);this.offset=this.minmax(e,0,100),this.element.style.top=this.offset+"%"}}initPosition(t){this.axis==="x"?this.element.style.left=t+"%":this.element.style.top=t+"%"}minmax(t,s,o){return Math.max(Math.min(t,o),s)}}export{g as A,p as M};
