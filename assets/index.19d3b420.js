var g=Object.defineProperty;var f=(a,t,s)=>t in a?g(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s;var n=(a,t,s)=>(f(a,typeof t!="symbol"?t+"":t,s),s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const i of e)if(i.type==="childList")for(const h of i.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function s(e){const i={};return e.integrity&&(i.integrity=e.integrity),e.referrerpolicy&&(i.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?i.credentials="include":e.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(e){if(e.ep)return;e.ep=!0;const i=s(e);fetch(e.href,i)}})();class l{constructor({state:t={},boxEleId:s="box",shapeEleId:o="shape",codeEleId:e="code",widthInputId:i="width",heightInputId:h="height",resetBtnId:d="reset",copyBtnId:m="copy",messageEleId:u="message",moveableElems:c={}}={}){n(this,"state");n(this,"box");n(this,"shape");n(this,"codeEle");n(this,"widthInput");n(this,"heightInput");n(this,"resetBtn");n(this,"copyBtn");n(this,"messageEle");n(this,"timerId");this.box=document.getElementById(s),this.shape=document.getElementById(o),this.codeEle=document.getElementById(e),this.copyBtn=document.getElementById(m),this.messageEle=document.getElementById(u),this.widthInput=document.getElementById(i),this.heightInput=document.getElementById(h),this.resetBtn=document.getElementById(d),this.widthInput.addEventListener("change",()=>{this.updateState("width",this.widthInput.value),this.saveStateAsUrlHash()}),this.heightInput.addEventListener("change",()=>{this.updateState("height",this.heightInput.value),this.saveStateAsUrlHash()}),this.resetBtn.addEventListener("click",this.resetBoxSize.bind(this)),this.copyBtn.addEventListener("click",this.handleCopyCode.bind(this)),this.initState(t),this.initHandles(c)}updateState(t,s){this.state[t]=s,this.updateBorderRadius(),this.updateBoxSize()}updateBoxSize(){this.box.style.width=this.state.width+"px",this.box.style.height=this.state.height+"px",this.widthInput.value=this.state.width,this.heightInput.value=this.state.height}resetBoxSize(){this.box.style.width="50vmin",this.box.style.height="50vmin",this.state.width=this.box.offsetWidth.toFixed(0),this.state.height=this.box.offsetHeight.toFixed(0),this.widthInput.value=this.state.width,this.heightInput.value=this.state.height,this.saveStateAsUrlHash()}async handleCopyCode(){await navigator.clipboard.writeText(this.codeEle.innerText),this.showMessage()}showMessage(t="Copied success! \u{1F44C}",s=2500){this.timerId&&clearTimeout(this.timerId),this.messageEle.innerText=t,this.messageEle.style.opacity="1",this.messageEle.style.transform="translate(-50%, 0)",this.timerId=setTimeout(()=>{this.messageEle.style.opacity="0",this.messageEle.style.transform="translate(-50%, calc(-3rem - 100%))"},s)}setHash(t){window.history&&"pushState"in window.history?window.history.pushState(null,"",t):window.location.hash=t}static generateInitStateFromUrlHash(t){const s=/#(\d\d?|100)\.(\d\d?|100)\.(\d\d?|100)\.(\d\d?|100)-(?:(\d\d?|100)\.(\d\d?|100)\.(\d\d?|100)\.(\d\d?|100))?-(\d*).(\d*)/gm;if(!s.test(t))return;const o=["top","right","bottom","left","topY","rightY","bottomY","leftY","width","height"],e={};let i;for(s.lastIndex=0;(i=s.exec(t))!==null;)i.forEach((h,d)=>{d!=0&&h&&(e[o[d-1]]=h)});return e}}class r{constructor(t,s,o,e=30,i=()=>{}){n(this,"element");n(this,"onChange");n(this,"axis");n(this,"offset");n(this,"onDragEnd");n(this,"onMousedown",t=>{t.preventDefault(),this.element.classList.add("active"),document.addEventListener("mousemove",this.onMove),document.addEventListener("mouseup",this.onEnd)});n(this,"onMove",t=>{this.setPosition(t.clientX,t.clientY),this.onChange(this.element.id,this.offset)});n(this,"onEnd",()=>{this.element.classList.remove("active"),this.onDragEnd(),document.removeEventListener("mousemove",this.onMove),document.removeEventListener("mouseup",this.onEnd)});this.element=t,this.onChange=s,this.axis=o,this.offset=e,this.onDragEnd=i,this.initPosition(e),this.onChange(this.element.id,this.offset),this.element.addEventListener("mousedown",this.onMousedown)}setPosition(t,s){const o=this.element.parentElement.parentElement.getBoundingClientRect();if(this.axis==="x"){const e=+((t-o.left)/o.width*100).toFixed(0);this.offset=this.minmax(e,0,100),this.element.style.left=this.offset+"%"}else{const e=+((s-o.top)/o.height*100).toFixed(0);this.offset=this.minmax(e,0,100),this.element.style.top=this.offset+"%"}}initPosition(t){this.axis==="x"?this.element.style.left=t+"%":this.element.style.top=t+"%"}minmax(t,s,o){return Math.max(Math.min(t,o),s)}}class p extends l{initState(t){const s={top:30,right:30,bottom:30,left:30,width:this.box.offsetWidth.toFixed(0),height:this.box.offsetHeight.toFixed(0)};this.state=Object.assign(s,t)}initHandles(t){return{top:new r(t.top,this.updateState.bind(this),"x",this.state.top,this.saveStateAsUrlHash.bind(this)),right:new r(t.right,this.updateState.bind(this),"y",this.state.right,this.saveStateAsUrlHash.bind(this)),bottom:new r(t.bottom,this.updateState.bind(this),"x",this.state.bottom,this.saveStateAsUrlHash.bind(this)),left:new r(t.left,this.updateState.bind(this),"y",this.state.left,this.saveStateAsUrlHash.bind(this))}}updateBorderRadius(){const{top:t,right:s,bottom:o,left:e}=this.state,i=t+"% "+(100-t)+"% "+(100-o)+"% "+o+"% / "+e+"% "+s+"% "+(100-s)+"% "+(100-e)+"%";this.shape.style.borderRadius=i,this.codeEle.innerText=i}saveStateAsUrlHash(){const{top:t,right:s,bottom:o,left:e,width:i,height:h}=this.state,d=`#${t}.${s}.${o}.${e}--${i}.${h}`;this.setHash(d)}}const y={top:document.getElementById("top"),right:document.getElementById("right"),bottom:document.getElementById("bottom"),left:document.getElementById("left")},x=l.generateInitStateFromUrlHash(window.location.hash);new p({moveableElems:y,state:x});
